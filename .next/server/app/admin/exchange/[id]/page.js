(()=>{var e={};e.id=6581,e.ids=[6581],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10543:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>l,pages:()=>u,routeModule:()=>x,tree:()=>i}),a(96918),a(90596),a(91975),a(35866);var n=a(23191),r=a(88716),c=a(37922),d=a.n(c),s=a(95231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);a.d(t,o);let i=["",{children:["admin",{children:["exchange",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,96918)),"C:\\Users\\sainyi\\Desktop\\projects\\others\\trading-admin\\app\\admin\\exchange\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,90596)),"C:\\Users\\sainyi\\Desktop\\projects\\others\\trading-admin\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,91975)),"C:\\Users\\sainyi\\Desktop\\projects\\others\\trading-admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\sainyi\\Desktop\\projects\\others\\trading-admin\\app\\admin\\exchange\\[id]\\page.tsx"],l="/admin/exchange/[id]/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/exchange/[id]/page",pathname:"/admin/exchange/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},61206:(e,t,a)=>{let n={"07d4f30dfde118eb7a66d6aff236891cb7b8de2f":()=>Promise.resolve().then(a.bind(a,90964)).then(e=>e.$$ACTION_2),"2dd32882cd4ca00e5d3fb579aee1fc3fa9d79949":()=>Promise.resolve().then(a.bind(a,90964)).then(e=>e.getExchanges),"5524feed0c88632676e75fd986e1f899823cf332":()=>Promise.resolve().then(a.bind(a,90964)).then(e=>e.getExchangeById),"58f0a93f55b5656c947d64fec9856c292f8410b9":()=>Promise.resolve().then(a.bind(a,90964)).then(e=>e.changeExchangeStatus),"754e99d682a29d0f6ea10634243a83727ddb58b3":()=>Promise.resolve().then(a.bind(a,90964)).then(e=>e.$$ACTION_0),e1dd72ce093921bc1795e84e5075e853a68745a9:()=>Promise.resolve().then(a.bind(a,90964)).then(e=>e.$$ACTION_1),"2d15528f629c3af8998dec3807b0bce23bd14bc4":()=>Promise.resolve().then(a.bind(a,28565)).then(e=>e.getAdminInfo)};async function r(e,...t){return(await n[e]()).apply(null,t)}e.exports={"07d4f30dfde118eb7a66d6aff236891cb7b8de2f":r.bind(null,"07d4f30dfde118eb7a66d6aff236891cb7b8de2f"),"2dd32882cd4ca00e5d3fb579aee1fc3fa9d79949":r.bind(null,"2dd32882cd4ca00e5d3fb579aee1fc3fa9d79949"),"5524feed0c88632676e75fd986e1f899823cf332":r.bind(null,"5524feed0c88632676e75fd986e1f899823cf332"),"58f0a93f55b5656c947d64fec9856c292f8410b9":r.bind(null,"58f0a93f55b5656c947d64fec9856c292f8410b9"),"754e99d682a29d0f6ea10634243a83727ddb58b3":r.bind(null,"754e99d682a29d0f6ea10634243a83727ddb58b3"),e1dd72ce093921bc1795e84e5075e853a68745a9:r.bind(null,"e1dd72ce093921bc1795e84e5075e853a68745a9"),"2d15528f629c3af8998dec3807b0bce23bd14bc4":r.bind(null,"2d15528f629c3af8998dec3807b0bce23bd14bc4")}},52268:(e,t,a)=>{Promise.resolve().then(a.bind(a,74621))},40140:(e,t,a)=>{"use strict";a.d(t,{ut:()=>r}),a(15424);var n=a(46242);(0,n.$)("5524feed0c88632676e75fd986e1f899823cf332"),(0,n.$)("2dd32882cd4ca00e5d3fb579aee1fc3fa9d79949");var r=(0,n.$)("58f0a93f55b5656c947d64fec9856c292f8410b9")},74621:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(10326),r=a(35047),c=a(90434),d=a(11890),s=a(90772),o=a(33071),i=a(567),u=a(17577);function l(){(0,r.useParams)().id;let[e,t]=(0,u.useState)(null);return e?(0,n.jsxs)("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[n.jsx(c.default,{href:"/admin/exchange",children:n.jsx(s.z,{variant:"ghost",size:"icon",children:n.jsx(d.Z,{className:"h-4 w-4"})})}),(0,n.jsxs)("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Exchange Details"}),(0,n.jsxs)("p",{className:"text-muted-foreground",children:["Exchange ID: ",e.id]})]})]})}),(0,n.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,n.jsxs)(o.Zb,{children:[n.jsx(o.Ol,{children:n.jsx(o.ll,{children:"Customer Information"})}),(0,n.jsxs)(o.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Customer Name"}),n.jsx("p",{className:"text-lg",children:e.customerName})]}),(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),n.jsx("p",{className:"text-lg",children:e.customerId})]})]})]}),(0,n.jsxs)(o.Zb,{children:[n.jsx(o.Ol,{children:n.jsx(o.ll,{children:"Exchange Information"})}),(0,n.jsxs)(o.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),n.jsx(i.C,{className:{PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",APPROVED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",REJECTED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}[e.exchangeStatus]||"",children:e.exchangeStatus})]}),(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Created At"}),n.jsx("p",{className:"text-lg",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Updated At"}),n.jsx("p",{className:"text-lg",children:new Date(e.updatedAt).toLocaleDateString()})]})]})]}),(0,n.jsxs)(o.Zb,{className:"md:col-span-2",children:[n.jsx(o.Ol,{children:n.jsx(o.ll,{children:"Exchange Details"})}),n.jsx(o.aY,{className:"space-y-6",children:(0,n.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"From"}),(0,n.jsxs)("p",{className:"text-lg",children:[e.amount," ",e.fromCurrency]}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Account: ",e.fromAccountNo]})]}),(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"To"}),(0,n.jsxs)("p",{className:"text-lg",children:[e.exchangedAmount," ",e.toCurrency]}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Account: ",e.toAccountNo]})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Exchange Rate"}),(0,n.jsxs)("p",{className:"text-lg",children:["1 ",e.fromCurrency," = ",e.exchangeRate," ",e.toCurrency]})]}),(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Exchange Type"}),n.jsx("p",{className:"text-lg",children:e.exchangeType})]})]})]})})]})]})]}):n.jsx("div",{children:"Loading..."})}a(40140)},567:(e,t,a)=>{"use strict";a.d(t,{C:()=>s});var n=a(10326);a(17577);var r=a(28671),c=a(77863);let d=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function s({className:e,variant:t,...a}){return n.jsx("div",{className:(0,c.cn)(d({variant:t}),e),...a})}},11890:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});let n=(0,a(62881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},90964:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$ACTION_0:()=>s,$$ACTION_1:()=>i,$$ACTION_2:()=>l,changeExchangeStatus:()=>o,getExchangeById:()=>u,getExchanges:()=>d});var n=a(27745);a(26461);var r=a(99180),c=a(85723);let d=(0,n.j)("754e99d682a29d0f6ea10634243a83727ddb58b3",s);async function s(){try{return(await r._.exchange.findMany({orderBy:{createdAt:"desc"},include:{customer:!0}})).map(e=>({id:e.id,fromCurrency:e.fromCurrency,toCurrency:e.toCurrency,fromAccountNo:e.fromAccountNo,toAccountNo:e.toAccountNo,amount:e.amount.toNumber(),exchangedAmount:e.exchangedAmount.toNumber(),exchangeRate:e.exchangeRate.toNumber(),customerId:e.customerId,customerName:e.customer.name,exchangeStatus:e.exchangeStatus,exchangeType:e.exchangeType,createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString()}))}catch(e){return console.error("Error fetching exchanges:",e),null}}let o=(0,n.j)("e1dd72ce093921bc1795e84e5075e853a68745a9",i);async function i(e,t){try{let a=await r._.exchange.findUnique({where:{id:e}}),n=await r._.account.findUnique({where:{accountNo:a?.fromAccountNo}}),c=await r._.account.findUnique({where:{accountNo:a?.toAccountNo}});if(!a||!n||!c)return null;if("APPROVED"===t){let e=n.inreview_balance.toNumber()-a.amount.toNumber();await r._.account.update({where:{accountNo:a.fromAccountNo},data:{inreview_balance:e}}),await r._.account.update({where:{accountNo:a.toAccountNo},data:{balance:c.balance.toNumber()+a.exchangedAmount.toNumber(),inreview_balance:c.inreview_balance.toNumber()-a.exchangedAmount.toNumber()}})}else"REJECTED"===t&&(await r._.account.update({where:{accountNo:a.fromAccountNo},data:{inreview_balance:n.inreview_balance.toNumber()-a.amount.toNumber(),balance:n.balance.toNumber()+a.amount.toNumber()}}),await r._.account.update({where:{accountNo:a.toAccountNo},data:{inreview_balance:c.inreview_balance.toNumber()-a.exchangedAmount.toNumber()}}));return await r._.exchange.update({where:{id:e},data:{exchangeStatus:t}})}catch(e){return console.error("Error changing exchange status:",e),null}}let u=(0,n.j)("07d4f30dfde118eb7a66d6aff236891cb7b8de2f",l);async function l(e){try{let t=await r._.exchange.findUnique({where:{id:e},include:{customer:!0}});return t?{id:t.id,fromCurrency:t.fromCurrency,toCurrency:t.toCurrency,fromAccountNo:t.fromAccountNo,toAccountNo:t.toAccountNo,amount:t.amount.toNumber(),exchangedAmount:t.exchangedAmount.toNumber(),exchangeRate:t.exchangeRate.toNumber(),customerId:t.customerId,customerName:t.customer.name,exchangeStatus:t.exchangeStatus,exchangeType:t.exchangeType,createdAt:t.createdAt.toISOString(),updatedAt:t.updatedAt.toISOString()}:null}catch(e){return console.error("Error fetching exchange by id:",e),null}}(0,c.h)([d,o,u]),(0,n.j)("2dd32882cd4ca00e5d3fb579aee1fc3fa9d79949",d),(0,n.j)("58f0a93f55b5656c947d64fec9856c292f8410b9",o),(0,n.j)("5524feed0c88632676e75fd986e1f899823cf332",u)},96918:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let n=(0,a(68570).createProxy)(String.raw`C:\Users\sainyi\Desktop\projects\others\trading-admin\app\admin\exchange\[id]\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[8948,930,8125,5723,9360],()=>a(10543));module.exports=n})();